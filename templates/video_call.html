<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Consultation - Hey Doc!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src='https://meet.jit.si/external_api.js'></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Outfit', sans-serif;
        }
    </style>
</head>

<body class="bg-slate-900 h-screen w-screen overflow-hidden flex flex-col">
    <!-- Header -->
    <header class="bg-slate-800 text-white p-4 flex justify-between items-center shadow-lg z-10">
        <div class="flex items-center gap-3">
            <div
                class="w-10 h-10 bg-gradient-to-tr from-emerald-500 to-teal-500 rounded-xl flex items-center justify-center text-white font-bold">
                <i class="ri-video-chat-line"></i> HD
            </div>
            <div>
                <h1 class="font-bold text-lg">Video Consultation</h1>
                <p class="text-xs text-slate-400">Secure End-to-End Encrypted</p>
            </div>
        </div>
        button onclick="window.location.href='{{ dashboard_url }}'"
        class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-bold text-sm transition-colors">
        End Call
        </button>
    </header>

    <!-- Jitsi Container -->
    <div id="meet" class="flex-1 w-full bg-black"></div>

    <script>
        const domain = 'meet.jit.si';
        const options = {
            roomName: '{{ room_name }}',
            width: '100%',
            height: '100%',
            parentNode: document.querySelector('#meet'),
            userInfo: {
                displayName: '{{ user_name }}'
            },
            configOverwrite: {
                startWithAudioMuted: false,
                startWithVideoMuted: false,
                prejoinPageEnabled: false
            },
            interfaceConfigOverwrite: {
                TOOLBAR_BUTTONS: [
                    'microphone', 'camera', 'closedcaptions', 'desktop', 'fullscreen',
                    'fodeviceselection', 'hangup', 'profile', 'chat', 'recording',
                    'livestreaming', 'etherpad', 'sharedvideo', 'settings', 'raisehand',
                    'videoquality', 'filmstrip', 'invite', 'feedback', 'stats', 'shortcuts',
                    'tileview', 'videobackgroundblur', 'download', 'help', 'mute-everyone',
                    'security'
                ]
            }
        };
        const api = new JitsiMeetExternalAPI(domain, options);

        api.addEventListeners({
            videoConferenceLeft: function () {
                window.location.href = "{{ dashboard_url }}";
            }
        });
    </script>
</body>

</html>